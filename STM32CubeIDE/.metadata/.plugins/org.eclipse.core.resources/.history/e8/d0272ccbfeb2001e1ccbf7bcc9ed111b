/*
 * button.c
 *
 *  Created on: Dec 13, 2023
 *      Author: Huy
 */
#include "button.h"

/*********************************************************
 * BUTTON 1
*********************************************************/

int KeyReg0_1 = NORMAL_STATE;
int KeyReg1_1 = NORMAL_STATE;
int KeyReg2_1 = NORMAL_STATE;
int KeyReg3_1 = NORMAL_STATE;

int TimeOutForKeyPress_1 =  500;
int button1_flag = 0;

int isButtonPressed_1(){
	if(button1_flag == 1){
		button1_flag = 0;
		return 1;
	}
	return 0;
}

void subKeyProcess_1(){
	button1_flag = 1;
}

void getKeyInput_1(){
	KeyReg0_1 = KeyReg1_1;
	KeyReg1_1 = KeyReg2_1;
	KeyReg2_1 = HAL_GPIO_ReadPin(BUTTON_1_GPIO_Port, BUTTON_1_Pin);

	if(KeyReg0_1 == KeyReg1_1 && KeyReg1_1 == KeyReg2_1)
	{
		if(KeyReg3_1 != KeyReg2_1)
		{
			KeyReg3_1 = KeyReg2_1;
			if(KeyReg2_1 == PRESSED_STATE)
			{
				subKeyProcess_1();
				TimeOutForKeyPress_1 =  500;
			}
		}
		else
		{
			TimeOutForKeyPress_1--;
			if(TimeOutForKeyPress_1 == 0)
			{
				if(KeyReg2_1 == PRESSED_STATE)
				{
					subKeyProcess_1();
				}
				TimeOutForKeyPress_1 =  500;
			}
		}
	}
}



